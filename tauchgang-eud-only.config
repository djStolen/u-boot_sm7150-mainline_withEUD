#
# ===============================
# tauchgang EUD-only U-Boot config
# ===============================
#

# --- Core behavior ---
CONFIG_AUTOBOOT=n
CONFIG_BOOTDELAY=0
CONFIG_USE_BOOTCOMMAND=y
CONFIG_BOOTCOMMAND="while true; do fastboot 0; done"

# --- Fastboot ---
CONFIG_FASTBOOT=y
CONFIG_FASTBOOT_USB_DEV=0
CONFIG_USB_GADGET=y
CONFIG_USB_GADGET_DOWNLOAD=y
CONFIG_FASTBOOT_FLASH=y
CONFIG_FASTBOOT_UUU_SUPPORT=n

# --- USB: keep it simple, keep it alive ---
CONFIG_USB=y
CONFIG_USB_DWC3=y
CONFIG_USB_DWC3_GADGET=y
CONFIG_USB_DWC3_QCOM=y
CONFIG_USB_PHY=y

# Prevent teardown paths
CONFIG_USB_HOST=n
CONFIG_CMD_USB=n

# --- Qualcomm specifics ---
CONFIG_QCOM_EUD=y
CONFIG_QCOM_SMEM=y
CONFIG_QCOM_COMMAND_DB=y
CONFIG_QCOM_SCM=y

# --- Disable EFI / capsule machinery ---
# CONFIG_EFI_LOADER is not set
# CONFIG_EFI_RUNTIME_UPDATE_CAPSULE is not set
# CONFIG_EFI_CAPSULE_ON_DISK is not set
# CONFIG_EFI_CAPSULE_ON_DISK_EARLY is not set
# CONFIG_EFI_CAPSULE_FIRMWARE_RAW is not set
# CONFIG_EFI_VARIABLES is not set
# CONFIG_CMD_EFI is not set

# --- Disable block / filesystem paths ---
CONFIG_BLK=n
CONFIG_CMD_BLKMAP=n
CONFIG_FS_FAT=n
CONFIG_CMD_FAT=n
CONFIG_PARTITIONS=n

# --- Shell & debug (safe, helpful) ---
CONFIG_CMD_MEM=y
CONFIG_CMD_GPIO=y
CONFIG_CMD_POWEROFF=y
CONFIG_LOG=y
CONFIG_LOG_MAX_LEVEL=7

# --- Safety ---
CONFIG_PANIC_HANG=y
CONFIG_SYSRESET=y

## Extra hardening (optional but spicy)
## If you want absolute paranoia mode.
## This prevents accidental resets that might briefly drop USB.
#CONFIG_SYSRESET_CMD_RESET=n
#CONFIG_CMD_RESET=n
